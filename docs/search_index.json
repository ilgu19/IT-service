[["index.html", "IT Service Analytics Chapter 1 Read Data 1.1 Setup Environment 1.2 Data Review", " IT Service Analytics Il-Ku Kim 2021년 2월 10일 Chapter 1 Read Data 1.1 Setup Environment Import Packages &amp; functions if (!require(tidyverse)) { install.packages(&#39;tidyverse&#39;) ; library(tidyverse)} if (!require(caret)) { install.packages(&#39;caret&#39;) ; library(caret)} if (!require(gridExtra)) { install.packages(&#39;gridExtra&#39;) ; library(gridExtra)} # Time Series Data if (!require(forecast)) { install.packages(&#39;forecast&#39;) ; library(forecast)} if (!require(tseries)) { install.packages(&#39;tseries&#39;) ; library(tseries)} if (!require(tsibble)) { install.packages(&#39;tsibble&#39;) ; library(tsibble)} if (!require(feasts)) { install.packages(&#39;feasts&#39;) ; library(feasts)} # ljung_box if (!require(fable)) { install.packages(&#39;fable&#39;) ; library(fable)} # forecast 대신 사용 source(&#39;C:/ML/MyR/Myfunction.R&#39;) # 사용자 함수 모음 Read IT service data # 데이터 읽기 if (!require(data.table)) { install.packages(&#39;data.table&#39;) ; library(data.table)} DT &lt;- fread(&quot;C:/ML/IT service2/data/data_all.csv&quot;, header = TRUE, stringsAsFactors=FALSE, na.strings=getOption(&quot;datatable.na.strings&quot;,&quot;NA&quot;)) DT &lt;- as_tibble(DT) 1.2 Data Review Review data &amp; convert data into factor DT$leadtime.type &lt;- as.factor(DT$leadtime.type) DT$FTR &lt;- as.factor(DT$FTR) DT$backlog &lt;- as.factor(DT$backlog) DT$state &lt;- as.factor(DT$state) DT$reopen &lt;- as.factor(DT$reopen) DT$reassign &lt;- as.factor(DT$reassign) DT$cmgid &lt;- as.character(DT$cmgid) DT$locationid &lt;- as.character(DT$locationid) head(DT, 10) # A tibble: 10 x 39 leadtime.type reopen reassign FTR backlog state reassign.cnt reopen.cnt &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt; 1 1 0 0 0 0 Clos~ 0 0 2 1 0 0 1 0 Clos~ 1 0 3 1 0 0 0 0 Clos~ 0 0 4 1 0 0 0 0 Clos~ 0 0 5 2 0 0 0 0 Clos~ 2 0 6 1 0 0 1 0 Clos~ 1 0 7 3 0 1 0 0 Clos~ 3 0 8 1 0 0 0 0 Clos~ 0 0 9 1 0 1 0 0 Clos~ 3 0 10 1 0 0 0 0 Clos~ 0 0 # ... with 31 more variables: leadtime.day &lt;dbl&gt;, leadtime.hour &lt;dbl&gt;, # created &lt;date&gt;, resolved &lt;date&gt;, userid &lt;chr&gt;, division &lt;chr&gt;, job &lt;chr&gt;, # position &lt;chr&gt;, joindate &lt;date&gt;, leavedate &lt;dttm&gt;, user.type &lt;chr&gt;, # country &lt;chr&gt;, region &lt;chr&gt;, cmg2 &lt;chr&gt;, cmg3 &lt;chr&gt;, location &lt;chr&gt;, # cmg &lt;chr&gt;, cmgid &lt;chr&gt;, locationid &lt;chr&gt;, resolver &lt;chr&gt;, assignment &lt;chr&gt;, # BSID &lt;chr&gt;, BSID2 &lt;chr&gt;, service.type &lt;chr&gt;, incident.type &lt;chr&gt;, # priority &lt;chr&gt;, yyyymm &lt;date&gt;, week &lt;date&gt;, day &lt;chr&gt;, division2 &lt;chr&gt;, # yyyymmC &lt;date&gt; glimpse(DT) Rows: 2,316,132 Columns: 39 $ leadtime.type &lt;fct&gt; 1, 1, 1, 1, 2, 1, 3, 1, 1, 1, 1, 2, 1, 1, 3, 2, 1, 1,... $ reopen &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,... $ reassign &lt;fct&gt; 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0,... $ FTR &lt;fct&gt; 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0,... $ backlog &lt;fct&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,... $ state &lt;fct&gt; Closed, Closed, Closed, Closed, Closed, Closed, Close... $ reassign.cnt &lt;int&gt; 0, 1, 0, 0, 2, 1, 3, 0, 3, 0, 0, 2, 0, 0, 5, 22, 0, 0... $ reopen.cnt &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,... $ leadtime.day &lt;dbl&gt; 0.00, 0.66, 0.00, 1.24, 5.36, 1.65, 19.21, 1.77, 0.16... $ leadtime.hour &lt;dbl&gt; 0.03, 5.30, 0.02, 9.94, 42.89, 13.23, 153.65, 14.17, ... $ created &lt;date&gt; 2021-01-13, 2021-01-13, 2021-01-13, 2021-01-13, 2021... $ resolved &lt;date&gt; 2021-01-13, 2021-01-13, 2021-01-13, 2021-01-14, 2021... $ userid &lt;chr&gt; &quot;M237347&quot;, &quot;M272802&quot;, &quot;M237347&quot;, &quot;X222948&quot;, &quot;M241751&quot;... $ division &lt;chr&gt; &quot;IT&quot;, &quot;LS&quot;, &quot;IT&quot;, &quot;LS&quot;, &quot;LS&quot;, &quot;IT&quot;, &quot;LS&quot;, &quot;IT&quot;, &quot;IT&quot;,... $ job &lt;chr&gt; &quot;Infrastructure &amp; Core Technology&quot;, &quot;Biology&quot;, &quot;Infra... $ position &lt;chr&gt; &quot;IT Specialist - End User Services&quot;, &quot;Senior Scientis... $ joindate &lt;date&gt; 2015-11-18, 2019-01-14, 2015-11-18, 2020-06-29, 2018... $ leavedate &lt;dttm&gt; NA, NA, NA, 2021-01-27, NA, 2021-10-31, NA, NA, NA, ... $ user.type &lt;chr&gt; &quot;Employee&quot;, &quot;Employee&quot;, &quot;Employee&quot;, &quot;External&quot;, &quot;Empl... $ country &lt;chr&gt; &quot;United States of America&quot;, &quot;United States of America... $ region &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;LA&quot;, &quot;&quot;, &quot;AP&quot;, &quot;&quot;, &quot;AP&quot;, &quot;&quot;, &quot;AP&quot;, &quot;... $ cmg2 &lt;chr&gt; &quot;IT-IOM-S EUS Southeast USA&quot;, &quot;LS-PPD-NB NGS Team B&quot;,... $ cmg3 &lt;chr&gt; &quot;EMD Millipore Corporation&quot;, &quot;Sigma-Aldrich, Inc.&quot;, &quot;... $ location &lt;chr&gt; &quot;US-Bellefonte-N. Harrison Road&quot;, &quot;US-Rockville-Brosc... $ cmg &lt;chr&gt; &quot;IT-I&quot;, &quot;LS-P&quot;, &quot;IT-I&quot;, &quot;LS-P&quot;, &quot;LS-L&quot;, &quot;IT-H&quot;, &quot;LS-L... $ cmgid &lt;chr&gt; &quot;1975&quot;, &quot;2106&quot;, &quot;1975&quot;, &quot;2106&quot;, &quot;1561&quot;, &quot;1882&quot;, &quot;2131... $ locationid &lt;chr&gt; &quot;100031&quot;, &quot;100139&quot;, &quot;100031&quot;, &quot;100139&quot;, &quot;801041&quot;, &quot;80... $ resolver &lt;chr&gt; &quot;M237347&quot;, &quot;M240585&quot;, &quot;M237347&quot;, &quot;M236435&quot;, &quot;M274237&quot;... $ assignment &lt;chr&gt; &quot;EUS_USA-BELLEFONTE&quot;, &quot;BT-LV_BREL ORACLE EBUSINESS&quot;, ... $ BSID &lt;chr&gt; &quot;BS_1581&quot;, &quot;BS_0908&quot;, &quot;BS_1581&quot;, &quot;BS_3254&quot;, &quot;BS_1581&quot;... $ BSID2 &lt;chr&gt; &quot;BS_1581&quot;, &quot;BS_0908&quot;, &quot;BS_1581&quot;, &quot;BS_3254&quot;, &quot;BS_1581&quot;... $ service.type &lt;chr&gt; &quot;DESKTOP / LAPTOP SIAL&quot;, &quot;OTHER SOFTWARE SIAL&quot;, &quot;DESK... $ incident.type &lt;chr&gt; &quot;ALL INCIDENTS&quot;, &quot;ALL INCIDENTS&quot;, &quot;ALL INCIDENTS&quot;, &quot;A... $ priority &lt;chr&gt; &quot;P3&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P3&quot;, &quot;P4&quot;, &quot;P4&quot;, &quot;P3&quot;,... $ yyyymm &lt;date&gt; 2021-01-01, 2021-01-01, 2021-01-01, 2021-01-01, 2021... $ week &lt;date&gt; 2021-01-10, 2021-01-10, 2021-01-10, 2021-01-10, 2021... $ day &lt;chr&gt; &quot;수요일&quot;, &quot;수요일&quot;, &quot;수요일&quot;, &quot;목요일&quot;, &quot;수요일&quot;, &quot;목요일&quot;, &quot;화요일&quot;, &quot;목요일... $ division2 &lt;chr&gt; &quot;ETC&quot;, &quot;LS&quot;, &quot;ETC&quot;, &quot;LS&quot;, &quot;LS&quot;, &quot;ETC&quot;, &quot;LS&quot;, &quot;ETC&quot;, &quot;... $ yyyymmC &lt;date&gt; 2021-01-01, 2021-01-01, 2021-01-01, 2021-01-01, 2021... Review numeric data reassign.cnt reopen.cnt leadtime.day leadtime.hour n 2316132.00 2316132.000 2316132.0 2316132 na.count 159.00 11.000 0.0 0 min -2.00 0.000 0.0 0 max 111.00 10.000 1637.7 13102 range 113.00 10.000 1637.7 13102 mean 0.84 0.027 3.6 29 sd 1.66 0.182 12.9 103 qt1st.25% 0.00 0.000 0.0 0 qt2nd.50% 0.00 0.000 1.0 8 qt3st.75% 1.00 0.000 3.0 24 qt90th.90% 2.00 0.000 8.0 64 qt95th.95% 3.00 0.000 14.6 117 $reassign.cnt Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s -2 0 0 1 1 111 159 $reopen.cnt Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s 0 0 0 0 0 10 11 $leadtime.day Min. 1st Qu. Median Mean 3rd Qu. Max. 0 0 1 4 3 1638 $leadtime.hour Min. 1st Qu. Median Mean 3rd Qu. Max. 0 0 8 29 24 13102 "],["explore-data.html", "Chapter 2 Explore Data 2.1 Data by Assignment 2.2 Data visualization 2.3 Data visualization for top services", " Chapter 2 Explore Data 2.1 Data by Assignment Data resolved in 2020 by assigment group, measurement is the leadtime, # of day, to resolve the request Use standard R function: summarise_at # 그룹별 데이터 grp &lt;- &quot;assignment&quot;; col &lt;- &quot;leadtime.day&quot; # leadtime.hour IT.leadtime &lt;- DT %&gt;% filter(resolved &gt;= &quot;2020-01-01&quot; &amp; resolved &lt;= &quot;2020-12-31&quot;) %&gt;% group_by(.dots = all_of(grp)) %&gt;% summarise_at(vars(leadtime.day), lst(length,median, mean, sd, max)) IT.leadtime[order(IT.leadtime$length, decreasing = TRUE),] %&gt;% head(20) # A tibble: 20 x 6 assignment length median mean sd max &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 GLOBAL_SERVICEDESK_L1 125827 0 1.13 6.67 434 2 GLOBAL_SERVICEDESK_SRM 49934 0 1.37 3.87 201. 3 BT-TA_SIAL SAP SECURITY 25681 1 3.53 11.8 445. 4 GLOBAL_SERVICEDESK_SRM UIS 21852 0 1.63 5.06 168 5 GLOBAL_SERVICEDESK SIAL_L1 20176 0 1.30 9.67 423. 6 EMEA_GERMANY-DARMSTADT_FIELDSUPPORT UIS 17875 1 4.77 10.7 311. 7 GLOBAL_APPLICATIONS_QA_MANGO-ACN 14152 1 2.72 8.30 267. 8 Global_Messaging&amp;Collaboration_O365 13988 1.66 3.39 6.03 169. 9 HOSTING_IT WINDOWS VIRTUALIZATION CITRIX SER~ 13206 3 6.57 11.1 176. 10 GLOBAL_APPLICATIONS_MY LEARNING_SUPPORT-CTS 11983 1 1.78 4.78 239. 11 BUSINESS ANALYTICS_BI-CTS 11376 1 2.39 4.33 170. 12 ERP_SAP AMS AUTHORISATION-CTS 10789 1 3.23 10.3 371. 13 GLOBAL_SERVICEDESK_UAM 10581 1 2.00 5.04 384. 14 EUS_France_FieldSupport 9869 1 4.56 11.0 163. 15 GLOBAL_APPLICATIONS_QA_TRACKWISE-ACN 9752 0.77 1.53 4.43 344. 16 Global_ServiceNow_Support-CTS 9402 0 0.936 3.25 64 17 DCO_AD_Services_L2 8770 1 3.80 9.68 328. 18 EUS_CHINA-SHANGHAI 8243 0 1.30 2.85 75.7 19 IDENTITY &amp; ACCESS MGMT_SIAL IAM SERVICES_L2 8202 0 0.456 2.14 74 20 EUS_Bangalore_India 8121 2 5.72 10.4 253. Use customized function: zdesc.stat2 IT.leadtime2 &lt;- DT %&gt;% filter(resolved &gt;= &quot;2020-01-01&quot; &amp; resolved &lt;= &quot;2020-12-31&quot;) %&gt;% select(all_of(grp), all_of(col)) %&gt;% group_by(.dots = all_of(grp)) %&gt;% nest() %&gt;% # 동적으로 group by하기 mutate(stat = map(data, zdesc.stat2)) %&gt;% unnest(stat) %&gt;% arrange(desc(n)) IT.leadtime2$data &lt;- NULL; IT.leadtime2 &lt;- as_tibble(IT.leadtime2) IT.leadtime2[order(IT.leadtime2$n, decreasing = TRUE),] %&gt;% head(20) # A tibble: 20 x 14 assignment n na.count min max range mean sd qt1st qt2nd qt3st &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; 1 GLOBAL_SE~ 125827 0 0 434 434 1.13 6.67 0 0 0.08 2 GLOBAL_SE~ 49934 0 0 201. 201. 1.37 3.87 0 0 1.24 3 BT-TA_SIA~ 25681 0 0 445. 445. 3.53 11.8 0.38 1 3 4 GLOBAL_SE~ 21852 0 0 168 168 1.63 5.06 0 0 1.86 5 GLOBAL_SE~ 20176 0 0 423. 423. 1.30 9.67 0 0 0.3 6 EMEA_GERM~ 17875 0 0 311. 311. 4.77 10.7 0 1 5 7 GLOBAL_AP~ 14152 0 0 267. 267. 2.72 8.30 0 1 3 8 Global_Me~ 13988 0 0 169. 169. 3.39 6.03 0.37 1.66 4 9 HOSTING_I~ 13206 0 0 176. 176. 6.57 11.1 1 3 8 10 GLOBAL_AP~ 11983 0 0 239. 239. 1.78 4.78 0 1 2.35 11 BUSINESS ~ 11376 0 0 170. 170. 2.39 4.33 0.290 1 3 12 ERP_SAP A~ 10789 0 0 371. 371. 3.23 10.3 0 1 3 13 GLOBAL_SE~ 10581 0 0 384. 384. 2.00 5.04 0 1 2.65 14 EUS_Franc~ 9869 0 0 163. 163. 4.56 11.0 0 1 4 15 GLOBAL_AP~ 9752 0 0 344. 344. 1.53 4.43 0 0.77 2 16 Global_Se~ 9402 0 0 64 64 0.936 3.25 0 0 0 17 DCO_AD_Se~ 8770 0 0 328. 328. 3.80 9.68 0 1 4 18 EUS_CHINA~ 8243 0 0 75.7 75.7 1.30 2.85 0 0 2 19 IDENTITY ~ 8202 0 0 74 74 0.456 2.14 0 0 0 20 EUS_Banga~ 8121 0 0 253. 253. 5.72 10.4 1 2 6 # ... with 3 more variables: qt90th &lt;dbl&gt;, qt95th &lt;dbl&gt;, qt99th &lt;dbl&gt; 2.2 Data visualization Leadtime Distribution at glance for all requests in 2020 2.3 Data visualization for top services Density Plot for Leadtime Distribution Most of requests resolved take less than 10 days, and long tail in the graph shows long running tickets to resolve i &lt;- 1 assignGrp &lt;- subset(IT.leadtime2, n &gt; 10000)$assignment ggplots &lt;- vector(&#39;list&#39;, length(assignGrp)) for (k in assignGrp) { ggplots[[i]] &lt;- local({ data &lt;- DT %&gt;% filter(assignment == k, resolved &gt;= &quot;2020-01-01&quot; &amp; resolved &lt;= &quot;2020-12-31&quot;) xaxis &lt;- quantile(data$leadtime.day, 0.99,na.rm = T) p1 &lt;- data %&gt;% ggplot(aes(x = leadtime.day)) + geom_density(fill = &quot;lightgreen&quot;) + coord_cartesian(xlim = c(0, xaxis)) + labs(subtitle = k, x = &quot;Days&quot;, y = &quot;Density&quot;) + theme_bw() # print(p1) }) i &lt;- i + 1 } grid.arrange(ggplots[[1]], ggplots[[8]], nrow = 1) grid.arrange(ggplots[[3]], ggplots[[12]], nrow = 1) grid.arrange(ggplots[[10]], ggplots[[11]], nrow = 1) Monthly BoxPlot shows how much lead time varies across months and how many LRT, outlier, each service has "],["data-trend.html", "Chapter 3 Data trend 3.1 Time series for top services", " Chapter 3 Data trend 3.1 Time series for top services "]]
